<!DOCTYPE html>
<html lang="en">
<meta charset=UTF-8>
 <title>Contoh Analisis On-Page dengan TinyMCE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.tiny.cloud/1/a8u4hlknralxotdzfmtvtagxz3z8epiozjbp052yzmh1ghsc/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
</head>
<body>
    <h1>Contoh Form Input Konten</h1>
    <form>
        <label for="content">Konten Artikel</label>
        <textarea id="content" name="content"></textarea>
        <br>
        <label for="keyword-input">Kata Kunci</label>
        <input type="text" id="keyword-input" placeholder="Masukkan kata kunci">
        <br>
        <button type="button" onclick="analyze()">Analisis On-Page</button>
    </form>

    <h2>Hasil Analisis On-Page</h2>
    <p>Jumlah kata: <span id="word-count"></span></p>
    <p>Jumlah kata kunci: <span id="keyword-count"></span></p>
    <p>Kepadatan kata kunci: <span id="keyword-density"></span>%</p>
    <p>Heading tag yang kurang digunakan: <span id="heading-tags"></span></p>
    <p>Meta tag tidak terisi dengan benar: <span id="meta-tags"></span></p>

    <script>
        tinymce.init({
            selector: 'textarea',
            plugins: 'wordcount code',
            toolbar: 'undo redo | h1 h2 h3 h4 | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image | wordcount',
            menubar: true,
            statusbar: true,
            formats: {
                h1: { block: 'h1' },
                h2: { block: 'h2' },
                h3: { block: 'h3' },
                h4: { block: 'h4' }
            }
        });

  function analyze() {
  const content = tinymce.get('content').getContent({ format: 'raw' });
  const keywords = document.querySelector('#keyword-input').value.split(',');
  const wordCount = tinymce.get('content').plugins.wordcount.getCount();

  let keywordCountHTML = '';
  let totalKeywordCount = 0;

  keywords.forEach(keyword => {
    const count = (content.match(new RegExp(keyword.trim(), 'gi')) || []).length;
    keywordCountHTML += `<p>Jumlah kata kunci "${keyword.trim()}": <span>${count}</span></p>`;
    totalKeywordCount += count;
  });

  const parser = new DOMParser();
  const parsedContent = parser.parseFromString(content, 'text/html');
  const headings = Array.from(parsedContent.querySelectorAll('h1, h2, h3, h4, h5, h6'));
  const headingTags = headings
    .filter(tag => !content.includes(tag.textContent))
    .map(tag => tag.tagName.toLowerCase());

  const metaTags =
    !(parsedContent.querySelector('title')) &&
    !(parsedContent.querySelector('meta[name="description"]'));

  document.querySelector('#keyword-count').innerHTML = keywordCountHTML;
  document.querySelector('#total-keyword-count').innerHTML = totalKeywordCount;
  document.querySelector('#word-count').innerHTML = wordCount;
  document.querySelector('#heading-tags').innerHTML = headingTags.join(', ');
  document.querySelector('#meta-tags').innerHTML = metaTags ? 'Tidak ada' : 'Ada';
}



    </script>
</body>
</html>
